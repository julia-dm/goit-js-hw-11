{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixibay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export async function getPicture(query) {\n  const API_KEY = '44796717-c9697056d5a7f56baa85540ad';\n  const BASE_URL = 'https://pixabay.com/api/';\n  const res = await fetch(\n    `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n      query\n    )}&image_type=photo&orientation=horizontal&safesearch=true`\n  );\n  if (!res.ok) {\n    throw new Error(`Could not fetch ${query}, received ${response.status}`);\n  }\n  const data = await res.json();\n  console.log('API response data:', data);\n  return data.hits;\n}\n","export function showSearchResults(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"152\" />\n            <ul class=\"description\">\n              <li class=\"description-items\">\n                <span class=\"item\">Likes </span>${likes}\n              </li>\n              <li class=\"description-items\">\n                <span class=\"item\">Views </span>${views}\n              </li>\n              <li class=\"description-items\">\n                <span class=\"item\">Comments </span>${comments}\n              </li>\n              <li class=\"description-items\">\n                <span class=\"item\">Downloads </span>${downloads}\n              </li>\n            </ul>\n          </a>\n        </li>`\n    )\n    .join('');\n}\n","import { getPicture } from './js/pixibay-api.js';\nimport { showSearchResults } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst elements = {\n  searchForm: document.querySelector('.search-form'),\n  input: document.querySelector('.search-input'),\n  gallery: document.querySelector('.card-container'),\n  loader: document.querySelector('.loader'),\n  button: document.querySelector('.btn'),\n};\nlet page = 1;\n\nelements.searchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  elements.gallery.innerHTML = '';\n  const searchImg = elements.input.value.trim();\n  elements.loader.classList.remove('visually-hidden');\n  if (searchImg === '') {\n    iziToast.error({\n      iconUrl: './img/error.svg',\n      message: 'Search field cannot be empty!',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      messageColor: 'white',\n      titleColor: 'white',\n    });\n    elements.loader.classList.add('visually-hidden');\n    return;\n  }\n\n  getPicture(searchImg)\n    .then(data => {\n      elements.loader.classList.remove('visually-hidden');\n      elements.input.value = '';\n      if (data.length === 0) {\n        iziToast.error({\n          iconUrl: './img/error.svg',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          backgroundColor: '#ef4040',\n          messageColor: 'white',\n          titleColor: 'white',\n        });\n      } else {\n        elements.gallery.innerHTML = showSearchResults(data);\n        lightbox.refresh();\n      }\n    })\n    .catch(error => {\n      console.error('Fetch error:', error);\n      iziToast.error({\n        iconUrl: './img/error.svg',\n        message:\n          'An error occurred while fetching the images. Please try again later.',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: 'white',\n        titleColor: 'white',\n      });\n    })\n    .finally(() => elements.loader.classList.add('visually-hidden'));\n}\n\nconst lightbox = new simpleLightbox('.card-container a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nfetchImgBtn.addEventListener('click', async () => {\n  try {\n    const img = await getPicture();\n    showSearchResults(data);\n    page += 1;\n\n    // Replace button text after first request\n    if (page > 1) {\n      fetchImgBtn.textContent = 'Fetch more posts';\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"names":["getPicture","query","res","data","showSearchResults","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","elements","page","handleSearch","event","searchImg","iziToast","lightbox","error","simpleLightbox","img"],"mappings":"6vBAAO,eAAeA,EAAWC,EAAO,CAGtC,MAAMC,EAAM,MAAM,MAChB,qEAAgC,mBAC9BD,CACD,CAAA,0DACL,EACE,GAAI,CAACC,EAAI,GACP,MAAM,IAAI,MAAM,mBAAmBD,CAAK,cAAc,SAAS,MAAM,EAAE,EAEzE,MAAME,EAAO,MAAMD,EAAI,OACvB,eAAQ,IAAI,qBAAsBC,CAAI,EAC/BA,EAAK,IACd,CCdO,SAASC,EAAkBC,EAAO,CACvC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,0CAE8BL,CAAa;AAAA,8CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,kDAGtBC,CAAK;AAAA;AAAA;AAAA,kDAGLC,CAAK;AAAA;AAAA;AAAA,qDAGFC,CAAQ;AAAA;AAAA;AAAA,sDAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,cAK1D,EACA,KAAK,EAAE,CACZ,CC1BA,MAAMC,EAAW,CACf,WAAY,SAAS,cAAc,cAAc,EACjD,MAAO,SAAS,cAAc,eAAe,EAC7C,QAAS,SAAS,cAAc,iBAAiB,EACjD,OAAQ,SAAS,cAAc,SAAS,EACxC,OAAQ,SAAS,cAAc,MAAM,CACvC,EACA,IAAIC,EAAO,EAEXD,EAAS,WAAW,iBAAiB,SAAUE,CAAY,EAE3D,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBH,EAAS,QAAQ,UAAY,GAC7B,MAAMI,EAAYJ,EAAS,MAAM,MAAM,KAAI,EAE3C,GADAA,EAAS,OAAO,UAAU,OAAO,iBAAiB,EAC9CI,IAAc,GAAI,CACpBC,EAAS,MAAM,CACb,QAAS,kBACT,QAAS,gCACT,SAAU,WACV,gBAAiB,UACjB,aAAc,QACd,WAAY,OAClB,CAAK,EACDL,EAAS,OAAO,UAAU,IAAI,iBAAiB,EAC/C,MACD,CAEDb,EAAWiB,CAAS,EACjB,KAAKd,GAAQ,CACZU,EAAS,OAAO,UAAU,OAAO,iBAAiB,EAClDA,EAAS,MAAM,MAAQ,GACnBV,EAAK,SAAW,EAClBe,EAAS,MAAM,CACb,QAAS,kBACT,QACE,2EACF,SAAU,WACV,gBAAiB,UACjB,aAAc,QACd,WAAY,OACtB,CAAS,GAEDL,EAAS,QAAQ,UAAYT,EAAkBD,CAAI,EACnDgB,EAAS,QAAO,EAExB,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,MAAM,eAAgBA,CAAK,EACnCF,EAAS,MAAM,CACb,QAAS,kBACT,QACE,uEACF,SAAU,WACV,gBAAiB,UACjB,aAAc,QACd,WAAY,OACpB,CAAO,CACP,CAAK,EACA,QAAQ,IAAML,EAAS,OAAO,UAAU,IAAI,iBAAiB,CAAC,CACnE,CAEA,MAAMM,EAAW,IAAIE,EAAe,oBAAqB,CACvD,aAAc,MACd,aAAc,GAChB,CAAC,EACD,YAAY,iBAAiB,QAAS,SAAY,CAChD,GAAI,CACF,MAAMC,EAAM,MAAMtB,IAClBI,EAAkB,IAAI,EACtBU,GAAQ,EAGJA,EAAO,IACT,YAAY,YAAc,mBAE7B,OAAQM,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC"}